@using UsersApp.ViewModels
@model OrderViewModel

@{
    ViewBag.Title = "إنشاء طلب";
}

<h2>إنشاء طلب</h2>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    
    <div class="form-group">
        @Html.LabelFor(model => model.Name)
        @Html.TextBoxFor(model => model.Name, new { @class = "form-control" })
        @Html.ValidationMessageFor(model => model.Name)
    </div>
    <div class="form-group">
        @Html.LabelFor(model => model.Email)
        @Html.TextBoxFor(model => model.Email, new { @class = "form-control" })
        @Html.ValidationMessageFor(model => model.Email)
    </div>
    <div class="form-group">
        @Html.LabelFor(model => model.MobileNumber)
        @Html.TextBoxFor(model => model.MobileNumber, new { @class = "form-control" })
        @Html.ValidationMessageFor(model => model.MobileNumber)
    </div>
    <div class="form-group">
        @Html.LabelFor(model => model.Address)
        @Html.TextAreaFor(model => model.Address, new { @class = "form-control" })
        @Html.ValidationMessageFor(model => model.Address)
    </div>
    <div class="form-group">
        @Html.LabelFor(model => model.PaymentMethod)
        @Html.TextBoxFor(model => model.PaymentMethod, new { @class = "form-control" })
        @Html.ValidationMessageFor(model => model.PaymentMethod)
    </div>
    <div class="form-group">
        @Html.LabelFor(model => model.TotalPrice)
        @Html.TextBoxFor(model => model.TotalPrice, new { @class = "form-control", type = "number", step = "0.01" })
        @Html.ValidationMessageFor(model => model.TotalPrice)
    </div>
    
    <h3>تفاصيل الطلب</h3>
    <div id="order-details">
        @for (int i = 0; i < (Model.OrderDetails?.Count ?? 0); i++)
        {
            <div class="order-detail">
                @Html.HiddenFor(m => m.OrderDetails[i].DishId)
                <div class="form-group">
                    @Html.LabelFor(m => m.OrderDetails[i].Quantity)
                    @Html.TextBoxFor(m => m.OrderDetails[i].Quantity, new { @class = "form-control" })
                    @Html.ValidationMessageFor(m => m.OrderDetails[i].Quantity)
                </div>
                <div class="form-group">
                    @Html.LabelFor(m => m.OrderDetails[i].UnitPrice)
                    @Html.TextBoxFor(m => m.OrderDetails[i].UnitPrice, new { @class = "form-control", type = "number", step = "0.01" })
                    @Html.ValidationMessageFor(m => m.OrderDetails[i].UnitPrice)
                </div>
            </div>
        }
    </div>

    <button type="submit" class="btn btn-primary">إنشاء الطلب</button>
}
